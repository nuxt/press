
**NuxtPress** é um microframework que faz uso do [sistema de módulos do Nuxt][1]. Ele automaticamente registrará rotas, templates e opções na sua aplicação Nuxt, dependendo de como você o configurar. Ele também se encarrega de carregar arquivos Markdown, renderizá-los e torná-los disponíveis estaticamente.

[1]: https://nuxtjs.org/guide/modules/

# Setup

Install via [npm](http://npmjs.com) or [yarn](https://yarnpkg.com/):

```shell
$ npm install nuxt @nuxt/press
$ yarn add nuxt @nuxt/press
```

Note that you must also install [Nuxt][nuxt] if you haven't already.

[nuxt]: https://nuxtjs.org

# Configuração

First, **NuxtPress** needs to be enabled via `nuxt.config.js`:

```js
export default {
  modules: ['@nuxt/press']
}
```

This will start NuxtPress in its **default mode**, which enables support for Markdown `pages/`, and automatic full static `nuxt generate` for them.

Bundled apps can also be selectively enabled based on the presence of the `docs/`, `blog/` and `slides/` directories. In **default mode**, the URL prefix for each bundled app matches these directories, .e.g, blog will be able available at `/blog`.

> In a freshly started project, `npm install` (or `yarn add`) will automatically create that `nuxt.config.js` file for you if you haven't already.

Alternatively, you can also do:

```js
export default {
  modules: [
    ['@nuxt/press', '<mode>']
  ]
}
```

This will start NuxtPress in **docs standalone mode**:

```js
export default {
  modules: [
    ['@nuxt/press', 'docs']
  ]
}
```

> That's the only allowed NuxtPress configuration via `nuxt.config.js`. For everything else, use either `nuxt.press.json` or `nuxt.press.js`, covered in the next topic.

In docs standalone mode, there's no URL prefix, so here docs will be available at `/`, not `/docs`, and Markdown files can be placed directly on `<srcDir`>.

Standalone mode works similarly for `blog` and `slides`, as will be shown later.

> You can configure NuxtPress in one of two ways: via `nuxt.press.json`, an autogenerated config file containing most common (JSON-serializable) options, or via `nuxt.press.js`, a full-blown JavaScript configuration file. `nuxt.press.js` will always take precedence over `nuxt.press.json`

The `nuxt.press.json` file autogenerated for [this documentation][docs-source] can be seen below. The `nav` key is initially empty and must be filled out.

[docs-source]: https://github.com/nuxt/press/tree/master/demo/docs

```json
{
  "docs": {
    "dir": "docs",
    "prefix": "/",
    "title": "NuxtPress documentation",
    "nav": [
      { "Home": "/" },
      { "Internals": "/internals" },
      { "GitHub": "https://github.com/nuxt/press" }
    ],
    "sidebar": [
      "/",
      "/guide"
    ]
  }
}
```


# Default mode

At its core, **NuxtPress** enables you to use Markdown files as [Nuxt pages][np]:

[np]: https://nuxtjs.org/guide/views/#pages

<table>
<tr>
<td><code>pages/index.md</code></td>
<td><code>/</code></td>
</tr>
<tr>
<td><code>pages/foo/index.md</code></td>
<td><code>/foo</code></td>
</tr>
<tr>
<td><code>pages/foo/bar.md</code></td>
<td><code>/foo/bar</code></td>
</tr>
</table>

Not only will NuxtPress transform Markdown files into working routes, it will also parse YAML metadata via [gray-matter][gm], if available.

[gm]: https://github.com/jonschlinkert/gray-matter

Here's a snippet from [`examples/pages`][pages-example]:

[pages-example]: https://github.com/nuxt/press/tree/master/examples/pages

```md
---
someText: hey, this works
someOtherText: hey, this works too
---

## Hello world

Go to [/subpage](/subpage)

Go to [/subpage/other](/subpage/other)

Msg: {{ $press.source.someText }}

Msg: **{{ $press.source.someOtherText }}**
```

You can also use the YAML metadata to specify the [Nuxt layout][nlayout]:

[nlayout]: https://nuxtjs.org/api/pages-layout/

```md
---
layout: yourLayout
---
```

# Beyond pages

Before we move on, keep in mind that **NuxtPress** can be added to and seamlessly extend any existing Nuxt application. **A NuxtPress app is a Nuxt app**. As long as it's the last enabled module, it won't interfere with existing functionality.

In **default mode**, in addition to now being able to add Markdown files directly to `pages/`, **you have three new route folders to work with**: **`docs/`**, **`blog/`** and **`slides/`**.  The presence of any of these directories in the **`srcDir`** of a Nuxt project will enable their corresponding NuxtPress modes.

You can customize these directories as follows:

```json
{
  "docs": {
    "dir": "my-custom-docs-dir"
  },
  "blog": {
    "dir": "my-custom-blog-dir"
  },
  "slides": {
    "dir": "my-custom-slides-dir"
  }
}
```

> You can run multiple NuxtPress modes in the same Nuxt app.

# Standalone mode

You've seen briefly how to specify which bundled app should be loaded by passing a mode parameter to the `@nuxt/press` definition in `nuxt.config.js`.

**Standalone mode** basically tells NuxtPress two things:  you're only using **one of the available bundled apps** and the URL prefix for  the URLs generated by the app bundle **should be `/`**, i.e., mixed with those that result from files being placed under the `pages/` directory.

That means if you're running `blog` in **standalone mode**:

```js
export default {
  modules: [
    ['@nuxt/press', 'blog']
  ]
}
```

And you have a `pages/index.vue` file, that is effectively overriding the index blog view. On the other hand, if you have `pages/about.md`, that will be available as `/about` and the blog index will be available at `/`.

Depending on the standalone mode you choose, Markdown files are searched for in different directories, as detailed below:

Standalone mode | Lookup directories
--------------- | ----------------------------------------
`docs`          | `<srcDir>` **or** `<srcDir>/docs`
`blog`          | `<srcDir>/entries` **or** `<srcDir>/posts`
`slides`        | `<srcDir>` **or** `<srcDir>/slides`

You can also set the standalone app via `nuxt.press.json`:

```json
{
  "mode": "slides"
}
```

Or via `nuxt.press.js`:

```js
export default {
  mode: 'slides'
}
```

# Publishing blogs

You can structure Markdown files for the blog mode (under the configured lookup directory) in however many subdirectories you want (for grouping posts by year of publication for, for instance). What determines the publishing date of each blog entry is actually their Markdown source header.

By default, NuxtPress uses a simple format where the first line is parsed out as the publication date. **Titles** and **slugs** are automatically generated from the first heading (`#`) of your Markdown sources:

```
June 20, 2019

# Blog Entry's Title

```

If your Markdown sources however start with a `---`, NuxtPress will try and parse it via [gray-matter][gm] and will look for `title`, `slug` and `date`.

[gm]: https://github.com/jonschlinkert/gray-matter

```markup
---
title: Blog Entry's Title
date: June 20, 2019
slug: blog-entry-slug
---

# This Heading Is Not Used As Title

```

## Adding sidebar links

NuxtPress' default blog template makes it easy to automatically include sidebar text links.

Here's `nuxt.press.json` from [`examples/blog`][examples-blog].

[examples-blog]:  https://github.com/nuxt/press/tree/master/examples/blog

```json
{
  "blog": {
    "links": [
      {"Home": "/blog"},
      {"Archive": "/blog/archive"},
      {"About": "/blog/about"},
    ]
  }
}
```

This feature is mostly illustrative. You're likely to benefit more from ejecting the entire app bundle and adding your code for the `sidebar` component. Your component can still have access to these options you define under the `blog` configuration key in `nuxt.press.json` or `nuxt.press.js`, making it extremely to customize templates even with your own configuration options.

# Publishing docs

The docs mode of NuxtPress provides similar functionality as VuePress. NuxtPress even borrows config syntax and some components from VuePress, but although NuxtPress aims to provide similar functionality its not meant to be a one to one replacement.

## Path prefix

As you saw before, the URL prefix is automaticaly determined by whether you're running docs mode in NuxtPress standalone or default mode (`/` vs `/docs`).  You can override this by manually setting `docs.prefix` in the configuration:


```json
{
  "docs": {
    "prefix": "/custom-docs-prefix/"
  }
}
```

NuxtPress has full support for Markdown via [`@nuxt/markdown`](https://github.com/nuxt/markdown).

## Home page

NuxtPress will automatically detect the presence of a **`README.md`** file or an **`index.md`** file in the configured lookup directory and make that the *introductory page* of your docs suite.

NuxtPress provides a default home page layout similar to VuePress which can be configured by a YAML meta data section in your markdown index.

```yaml
---
home: true
heroImage: /hero.png
actionText: Get Started →
actionLink: /guide/
features:
- title: Simplicity First
  details: Minimal setup with markdown-centered project structure helps you focus on writing.
- title: Nuxt-Powered
  details: Enjoy the dev experience of Nuxt.js and Vue
- title: Performant
  details: Because Nuxt.js
footer: MIT Licensed
---
```

All additional markdown content will be rendered after the features sections (but before the footer).

## Navbar

Currently the NuxtPress navbar only supports a links section. E.g. the links you see on the top right corner of this page are added via NuxtPress configuration. Use the `docs.nav` configuration key, as follows:

NuxtPress does not (yet) support dropdown menus.

```json
{
  "docs": {
    "nav": [
      {
        "text": "Home",
        "link": "/"
      },
      {
        "text": "Internals",
        "link": "/internals"
      },
      {
        "text": "GitHub",
        "link": "https://github.com/nuxt/press"
      }
    ]
  }
}
```

You can also use a shorthand syntax as follows:

```json
{
  "docs": {
    "nav": [
      {"Home": "/"},
      {"Internals": "/internals"},
      {"GitHub": "https://github.com/nuxt/press"}
    ]
  }
}
```

## Sidebar

The docs bundled app also includes a sidebar component that can automatically scroll topics into view when you click them, and highlights which topic is currently into view. A basic sidebar expects an Array of links:

```
{
  "docs": {
    "sidebar": [
      "/",
      "/guide",
      ["/customize", 'Customize the app']
    ]
  }
}
```

You can omit the `.md` extension, and paths ending with `/` are inferred as */README.md or */index.md. The text for the link is automatically inferred (either from the first header in the page or explicit title in YAML meta data). If you wish to explicitly specify the link text, use an Array in form of [link, text].

### Nested Header Links

The sidebar automatically displays links for headers in the current active page, nested under the link for the page itself. You can customize this behavior using `docs.sidebarDepth`. The default depth is 1, which extracts the h2 headers. Setting it to 0 disables the header links, and the max value is 2 which extracts both h2 and h3 headers.

A page can also override this value via YAML front matter:

```yaml
---
sidebarDepth: 2
---
```

### Sidebar Groups

You can divide sidebar links into multiple groups by using objects:

```json
{
  "docs": {
    "sidebar": [
      {
        "title": "Group 1",
        "children": [
          "/"
        ]
      },
      {
        "title": "Group 2",
        "children": [ /* ... */ ]
      }
    ]
  }
}
```
### Multiple Sidebars

If you wish to display different sidebars for different sections of content, first organize your pages into directories for each desired section:

```
.
├─ README.md
├─ contact.md
├─ about.md
├─ foo/
│  ├─ README.md
│  ├─ one.md
│  └─ two.md
└─ bar/
   ├─ README.md
   ├─ three.md
   └─ four.md
```

Then, update your configuration to define your sidebar for each section.

```json
{
  "docs": {
    "sidebar": {
      "/": [
        "",        /* / */
        "contact", /* /contact.html */
        "about"    /* /about.html */
      ],

      "/foo/": [
        "",     /* /foo/ */
        "one",  /* /foo/one.html */
        "two"   /* /foo/two.html */
      ],

      "/bar/": [
        "",      /* /bar/ */
        "three", /* /bar/three.html */
        "four"   /* /bar/four.html */
      ]
    }
  }
}
```

###  Auto Sidebar for Single Pages

If you wish to automatically generate a sidebar that contains only the header links for the current page, you can use YAML meta data for that page:

```yaml
---
sidebar: auto
---
```


See the full configuration for this documentation suite [here][docs-config].

[docs-config]: https://github.com/nuxt/press/blob/master/docs/nuxt.press.json

# Publishing slides

NuxtPress will parse each slide from Markdown using `#` as the delimiter. If text follows `#`, it's appended as a `<h1>` tag. If not, it's simply used as the delimiter and no `<h1>` tag is added.

The following example represents four slides. It is a single file, but here it is shown divided in sections to illustrate the processing.

```md

My Presentation
(opener, slide 1)

```
```md
# Slide 2 header

Slide 2 text

```
```md
#

Slide 3 text
(slide with no header)

```
```md
# Slide 4 header

Slide 4 text

```

This is a simplification from [MDX][mdx], which uses `---` as delimiter.

[mdx]: https://mdxjs.com/

## Convenience classes

NuxtPress adds classes to slides to make styling easier. 

```css
.slides-<fileName> .slide-<slideNumber> {
  ...
}
```

Use the above CSS selector pattern to style the entire presentation or any specific slide. You can also inline `<style>` tags with such selectors in the slides Markdown source. Take a `slides/hello.md` file, for example:

```
# Presentation

<style>
.slides-hello .slide-1 h1 {
  font-size: 2rem;
}
</style>
```

This would modify the styles for the first slide.
